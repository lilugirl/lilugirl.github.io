function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _iterableToArrayLimit(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,o,a=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);l=!0);}catch(u){i=!0,o=u}finally{try{l||null==n.return||n.return()}finally{if(i)throw o}}return a}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var __vite_style__=document.createElement("style");__vite_style__.innerHTML='body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}code{font-family:source-code-pro,Menlo,Monaco,Consolas,"Courier New",monospace}:root{--primary:green;--warning:yellow;--info:white;--danger:red}#dashboard-layout{display:grid;width:100%;height:100vh;grid-template-areas:"head head" "nav main" "nav foot";grid-template-rows:50px 1fr 30px;grid-template-columns:150px 1fr}#dashboard-layout header{grid-area:head;background-color:gray;padding:16px}#dashboard-layout nav{padding:16px;grid-area:nav;background-color:#8a2be2}#dashboard-layout nav a{display:block;color:#fff}#dashboard-layout main{grid-area:main;padding:16px}#dashboard-layout footer{grid-area:foot;background-color:gray;display:flex;align-items:center}.login{height:100vh;width:100%;display:flex;justify-content:center;align-items:center}.login .wrapper{width:500px;min-height:300px;background-color:#eee}',document.head.appendChild(__vite_style__),System.register(["./vendor-legacy.d203c633.js"],(function(e,t){"use strict";var n,r,o,a,l,i,u,c,s,d,m,p,f,h,g,y;return{setters:[function(e){n=e.u,r=e.D,o=e.c,a=e.a,l=e.R,i=e.S,u=e.b,c=e.d,s=e.e,d=e.f,m=e.N,p=e.H,f=e.g,h=e.h,g=e.i,y=e.P}],execute:function(){function e(){var e=n().pathname;return r.exports.useEffect((function(){window.scrollTo(0,0)}),[e]),null}var b=o({name:"app",initialState:{loading:!1},reducers:{setLoading:function(e,t){e.loading=t.payload}}}),E=b.actions.setLoading,v=function(e){return e.app.loading},w=b.reducer,S={token:window.localStorage.getItem("token")?window.localStorage.getItem("token"):"",role:window.localStorage.getItem("role")?window.localStorage.getItem("role"):""},_=o({name:"auth",initialState:S,reducers:{setToken:function(e,t){e.token=t.payload},setRole:function(e,t){e.role=t.payload}}}),k=function(e){return e.auth.token},x=function(e){return e.auth.role},j=_.reducer,T=function(e){var t=e.routes,n=a(x),r=t.filter((function(e){return e.component})),o=t.filter((function(e){return e.to}));return l.createElement(l.Fragment,null,l.createElement(i,null,o.map((function(e,t){return l.createElement(u,{exact:!0,from:e.from,to:e.to,key:t})})),r.map((function(e,t){return l.createElement(c,{key:e.path,path:e.path,render:function(t){return e.title&&e.subtitle&&(t.location.state=_objectSpread(_objectSpread({},t.location.state),{},{title:e.title,subtitle:e.subtitle})),!(e.authority&&e.authority.length>0)||n&&e.authority.includes(n)?l.createElement(e.component,_objectSpread({},t)):l.createElement(u,{from:e.path,to:e.redirectPath||"/login"})}})}))))},O=function(e,t){return e()},I=o({name:"nav",initialState:{title:"",subtitle:""},reducers:{setTitle:function(e,t){console.log("setTitle payload",t),e.title=t.payload},setSubTitle:function(e,t){console.log("setsubTitle payload",t),e.subtitle=t.payload}}}),P=I.actions,A=P.setTitle,F=P.setSubTitle,C=function(e){return e.nav.title},L=function(e){return e.nav.subtitle},D=I.reducer,N=function(){var e=a(C),t=a(L);return l.createElement("div",null,e,"   ",t&&"> "+t," ")},R=function(){return l.createElement("div",null,"page is not found")},z=s.create({timeout:5e3,withCredentials:!0,responseType:"json"});z.interceptors.request.use((function(e){return e.headers.Authorization=(window.localStorage.getItem("token"),window.localStorage.getItem("token")),e})),z.interceptors.response.use((function(e){return 200===e.status?e.data:e}),(function(e){console.log("拦截错误",e)}));var H=[{from:"/dashboard/user",to:"/dashboard/user/list"},{path:"/dashboard/user/list",component:function(){return r.exports.useEffect((function(){z.get("/index-infos").then((function(e){console.log("res",e)}))})),l.createElement("div",null,"list of user ")},title:"用户管理",subtitle:"用户列表"},,{path:"/dashboard/user/add",component:function(e){return console.log("add props",e),l.createElement("div",null,"add user")},title:"用户管理",subtitle:"添加用户"},{path:"*",component:R}],M=[{from:"/dashboard/product",to:"/dashboard/product/list"},{path:"/dashboard/product/list",component:function(){var e=_slicedToArray(r.exports.useState({hotGoodses:[]}),2),t=e[0],n=e[1];return r.exports.useEffect((function(){z.get("/api/index-infos").then((function(e){console.log("res",e),n(e.data)}))}),[]),l.createElement("div",null,l.createElement("h2",null,"产品列表"),l.createElement("ul",null,"热门产品",t&&t.hotGoodses&&t.hotGoodses.length>0&&t.hotGoodses.map((function(e,t){return l.createElement("li",{key:t},e.goodsName)}))))},title:"产品管理",subtitle:"产品列表"},,{path:"/dashboard/product/add",component:function(){return l.createElement("div",null,"add localid")},title:"产品管理",subtitle:"添加产品"},{path:"*",component:R}],G=[{from:"/dashboard",to:"/dashboard/user"},{path:"/dashboard/user",component:function(e){return console.log("user props",e),l.createElement("div",null,l.createElement(r.exports.Suspense,{fallback:l.createElement(l.Fragment,null,"loading")},l.createElement(T,{routes:H})))},title:"用户管理",subtitle:"用户列表",authority:["sysadmin"],redirectPath:"/dashboard/403"},{path:"/dashboard/product",component:function(){return l.createElement("div",null,l.createElement(r.exports.Suspense,{fallback:l.createElement(l.Fragment,null,"loading")},l.createElement(T,{routes:M})))},title:"产品管理",subtitle:"产品列表",authority:["admin","sysadmin"],redirectPath:"/login"},{path:"/dashboard/403",component:r.exports.lazy((function(){return O((function(){return t.import("./403-legacy.bd2573f6.js")}))}))},{path:"*",component:R}],U=function(){var e=a(k),t=d();return l.createElement(l.Fragment,null," ",e?"你好 "+e:"匿名",e&&l.createElement(l.Fragment,null,l.createElement("button",{onClick:function(){var e;t((e=function(){window.location.href="/#/login"},function(t){t(E(!0)),setTimeout((function(){window.localStorage.setItem("token",""),window.localStorage.setItem("role",""),t(_.actions.setToken("")),t(_.actions.setRole("")),t(E(!1)),e&&e()}),200)}))}},"登出")),!e&&l.createElement(l.Fragment,null,l.createElement("button",{onClick:function(){window.location.href="/#/login"}},"登录")))},K=function(){return l.createElement(l.Fragment,null,l.createElement(m,{to:"/dashboard/user"},"User"),l.createElement(m,{to:"/dashboard/product"},"Product"))},B=function(){return l.createElement(l.Fragment,null,"footer")},W=r.exports.lazy((function(){return O((function(){return t.import("./index-legacy.60e80614.js")}))})),q=r.exports.lazy((function(){return O((function(){return t.import("./404-legacy.9db4a7f1.js")}))})),$=[{from:"/",to:"/dashboard"},{path:"/dashboard",component:function(e){console.log("dashbaord props",e);var t=d();return r.exports.useEffect((function(){var n,r,o,a,l,i,u,c;null!=e&&null!==(n=e.location)&&void 0!==n&&null!==(r=n.state)&&void 0!==r&&r.title&&t(A(null==e||null===(l=e.location)||void 0===l||null===(i=l.state)||void 0===i?void 0:i.title));null!=e&&null!==(o=e.location)&&void 0!==o&&null!==(a=o.state)&&void 0!==a&&a.subtitle&&t(F(null==e||null===(u=e.location)||void 0===u||null===(c=u.state)||void 0===c?void 0:c.subtitle))}),[null==e?void 0:e.location]),l.createElement(l.Fragment,null,l.createElement("section",{id:"dashboard-layout"},l.createElement("header",null,l.createElement(U,null)),l.createElement("nav",null,l.createElement(K,null)),l.createElement("main",null,l.createElement(N,null),l.createElement(r.exports.Suspense,{fallback:l.createElement(l.Fragment,null)},l.createElement(T,{routes:G}))),l.createElement("footer",null,l.createElement(B,null))))},authority:["admin","sysadmin"],redirectPath:"/login"},{path:"/docs",component:W,authority:["user","admin","sysadmin"],redirectPath:"/login"},{path:"/login",component:function(){var e=d(),t=a(v);return l.createElement("div",{className:"login"},l.createElement("div",{className:"wrapper"},l.createElement("h2",null,"Login"),l.createElement("form",null,l.createElement("input",{placeholder:"用户名"}),l.createElement("input",{placeholder:"密码"}),l.createElement("button",{onClick:function(t){var n;t.preventDefault(),e((n=function(){window.location.href="/#/dashboard"},function(e){e(E(!0)),setTimeout((function(){window.localStorage.setItem("token","liuyi"),window.localStorage.setItem("role","admin"),e(_.actions.setToken("liuyi")),e(_.actions.setRole("admin")),e(E(!1)),n&&n()}),2e3)}))},disabled:t},"登录"))))}},{path:"/403",component:r.exports.lazy((function(){return O((function(){return t.import("./403-legacy.d4f914a2.js")}))}))},{path:"/404",component:q},{path:"*",component:q}];function J(){return l.createElement("div",{className:"App"},l.createElement(p,null,l.createElement(e,null),l.createElement(r.exports.Suspense,{fallback:l.createElement(l.Fragment,null)},l.createElement(T,{routes:$}))))}var Q=f({app:w,auth:j,nav:D}),V=h({reducer:Q});g.render(l.createElement(y,{store:V},l.createElement(J,null)),document.getElementById("root"))}}}));
